#  _
# | |_ _ __ ___  _   ___  __
# | __| '_ ` _ \| | | \ \/ /
# | |_| | | | | | |_| |>  <
#  \__|_| |_| |_|\__,_/_/\_\
#

# Setup 'v' to begin selection as in Vim
# bind-key -T vi-copy v begin-selection
# bind-key -T vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
# unbind -t vi-copy Enter
# bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# CUSTOM PREFIX
set -g prefix M-x
bind-key x send-prefix # for nested tmux sessions

set -s escape-time 0

# TERMINAL SETUP
set -g default-terminal 'tmux-256color' # replace this with your custom term-info name
set -g terminal-overrides ''
set -ga terminal-overrides ',*:Tc' # this is for 256 color
# set -ga terminal-overrides ',*:Ss=\eE[%p1%d q:Se=\eE[2 q'
setw -g xterm-keys on

# LARGE HISTORY
set-option -g history-limit 10000

# COLORS
# setw -g mode-bg black
# set-option -g pane-active-border-fg green
set-option -g pane-active-border-style fg='#ff00ff',bg=#000000
set-option -g pane-border-style        fg='#00ffff',bg=#000000

set-option -g message-style bg='#000000',fg='#ffffff'

set-window-option -g window-status-current-style fg='#000000',bg='#ff00ff'
set-window-option -g window-status-style         fg='#00ffff',bg='#000000'
set-option -g window-status-current-format "#I:#W"
set-option -g window-status-format         "#I:#W"

# UTF8 SUPPORT
# set-window-option -g utf8 on

# BASIC SETTINGS
set-window-option -g xterm-keys on # for vim
set-window-option -g mode-keys vi # vi key
set-window-option -g mode-keys vi # vim keybindings in copy mode
set-window-option -g monitor-activity on
set-window-option -g automatic-rename

# USE MOUSE, MORE ON MOUSE SUPPORT: http://floriancrouzat.net/2010/07/run-tmux-with-mouse-support-in-mac-os-x-terminal-app/
# setw -g mode-mouse on
# setw -g mouse-resize-pane on
# set -g mouse-select-window on
# set -g mouse-select-pane on
# set -g mouse on
# set -g history-limit 30000
# set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# VI MOVEMENT KEYS
# set-option -g status-keys vi


set-option        -g      base-index 1
set-window-option -g pane-base-index 1

# STATUS BAR
#set-option -g status-utf8 on
set-option -g  visual-activity on
set-option -g  status-justify centre
set-option -g  status-style fg='#ffffff',bg='#000000'
set-option -g  status-interval 1
set-option -g  status-left-length 1000
set-option -g  status-left ''
# set-option -ga status-left '#[default]#[fg=#ffff00,bg=#ff0000,bold]⚡ '
set-option -ga status-left '#[default]#[fg=#ffff00,bg=#ff0000     ]☭  '
# set-option -ga status-left '#[default]#[fg=#ff00ff,bg=#000000,bold]>>'
set-option -ga status-left '#[default]#[fg=#0000ff,bg=#000000,    ] #T'
set-option -ga status-left '#[default]#[fg=#0000ff,bg=#000000,    ] #(tmux-mem-cpu-load -g 5 -a 0)'
set-option -g  status-right-length 1000
set-option -g  status-right ''
set-option -ga status-right ' #[default]#[fg=#0000ff,bg=#000000     ]%a %H:%M:%S %Y-%m-%d'
# set-option -ga status-right ' #[default]#[fg=#ff00ff,bg=#000000,bold]<<'
set-option -ga status-right ' #[default]#[fg=#ffff00,bg=#ff0000     ]☭  '

# TITLES (WINDOW NUMBER, PROGRAM NAME, ACTIVE (OR NOT)
set-option -g set-titles on
set-option -g set-titles-string '#H:#S.#I.#P #W #T'

unbind [ # copy mode bound to escape key
unbind j
unbind C-b # unbind default leader key
unbind '"' # unbind horizontal split
unbind %   # unbind vertical split

# set-window-option -g window-status-current-bg red
setw -g aggressive-resize on

bind-key Escape copy-mode
bind-key -T copy-mode-vi i      send-keys -X cancel
bind-key -T copy-mode-vi C-V    send-keys -X rectangle-toggle
bind-key -T copy-mode-vi v      send-keys -X begin-selection
bind-key -T copy-mode-vi y      send-keys -X copy-selection-and-cancel

bind M-- select-layout "even-vertical"
bind M-| select-layout "even-horizontal"

bind-key R source-file ~/.tmux.conf
bind-key J command-prompt "join-pane -t:%%" # %% = prompt for window.pane [-V|H] # vert|hor split
bind-key B break-pane

bind N command-prompt "rename-window %%"
bind-key z new-window
bind-key c split-window -v
bind-key v split-window -h

bind-key q confirm-before -p "kill-window #W? (y/n)" kill-window

# WORKFLOW KEY BINDS
bind-key -T root M-C-h select-pane -L
bind-key -T root M-C-j select-pane -D
bind-key -T root M-C-k select-pane -U
bind-key -T root M-C-l select-pane -R
bind-key -T root M-C-y resize-pane -L
bind-key -T root M-C-u resize-pane -D
bind-key -T root M-C-i resize-pane -U
bind-key -T root M-C-o resize-pane -R
bind-key -T root M-C-a last-window
bind-key -T root M-C-n next-window
bind-key -T root M-C-p previous-window
bind-key -T root M-C-r rotate-window
bind-key -T root M-C-z resize-pane -Z # toggle zoom
bind-key -T root M-C-( switch-client -p
bind-key -T root M-C-) switch-client -n

bind-key -T copy-mode-vi M-j send-keys -X scroll-down
bind-key -T copy-mode-vi M-k send-keys -X scroll-up

# focus on first window
# select-window -t 0
